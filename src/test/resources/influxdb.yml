version: '3.8'

volumes:
  influxdb:
    driver: local
    driver_opts:
      type: none
      o: bind
      device: $PWD/influx/

services:
  influxdb:
    # image: influxdb:1.11.8
    image: influxdb:1.11
    container_name: influxdb
    restart: always
    ports:
      - 8086:8086
    volumes:
      # - influxdb:/var/lib/influxdb/data
      - influxdb:/var/lib/influxdb
      # - $PWD/influxdb.conf:/etc/influxdb/influxdb.conf
    environment:
      - INFLUXDB_DB=telegraf
      - INFLUXDB_ADMIN_USER=admin
      - INFLUXDB_ADMIN_PASSWORD=admin
